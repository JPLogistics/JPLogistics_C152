

<Template Name="JPL152_ELECTRICAL_Switch_Breaker_Template">
	<DefaultTemplateParameters>
		<WWISE_EVENT_1>beacon_light_switch_on</WWISE_EVENT_1>
		<WWISE_EVENT_2>beacon_light_switch_off</WWISE_EVENT_2>
	</DefaultTemplateParameters>
	<Component ID="#NODE_ID#" Node="#NODE_ID#">
		<UseTemplate Name="ASOBO_GT_Switch_Code">
			<INVERT_ANIM>TRUE</INVERT_ANIM>
			<ANIM_CODE>(A:BUS CONNECTION ON:#BUS_INDEX#, Bool) 100 *</ANIM_CODE>
			<LEFT_SINGLE_CODE>
				#BUS_INDEX# #BATTERY_BUS_INDEX# (&gt;K:2:ELECTRICAL_BUS_TO_BUS_CONNECTION_TOGGLE)
			</LEFT_SINGLE_CODE>
		</UseTemplate>
	</Component>	
</Template>
	
<Template Name = "JPL152_ALTERNATOR_Breaker">
  <UseTemplate Name = "JPL152_2way_switch_xml">
    <ANIMTIP_0></ANIMTIP_0>
    <ANIMTIP_1></ANIMTIP_1>
    <WWISE_EVENT_1>audio_switch_intercom</WWISE_EVENT_1>
    <WWISE_EVENT_2>audio_switch_intercom</WWISE_EVENT_2>
	<SWITCH_POSITION_TYPE>L</SWITCH_POSITION_TYPE>
    <SWITCH_POSITION_VAR>JPL152_ALT_BREAKER</SWITCH_POSITION_VAR>
    <LEFT_SINGLE_CODE>
		(K:ELECTRICAL_ALTERNATOR_BREAKER_TOGGLE) ! (&gt;K:ELECTRICAL_ALTERNATOR_BREAKER_TOGGLE)
		(L:JPL152_ALT_BREAKER) ! (L:JPL152_ALT_BREAKER)
    </LEFT_SINGLE_CODE>
  </UseTemplate>
</Template>
<Template Name = "JPL152_2way_switch_xml">
  <DefaultTemplateParameters>
    <SWITCH_POSITION_TYPE></SWITCH_POSITION_TYPE>
    <SWITCH_POSITION_VAR></SWITCH_POSITION_VAR>
    <LEFT_SINGLE_CODE></LEFT_SINGLE_CODE>
    <LEFT_LEAVE_CODE></LEFT_LEAVE_CODE>
    <INIT_VALUE>0</INIT_VALUE>
    <ANIMREF_ID>0</ANIMREF_ID>
    <ANIMTIP_0_ON_PERCENT>0</ANIMTIP_0_ON_PERCENT>
    <ANIMTIP_1_ON_PERCENT>1</ANIMTIP_1_ON_PERCENT>
  </DefaultTemplateParameters>
  <Component ID="#NODE_ID#" Node="#NODE_ID#">
    <Update Once="True">
      #INIT_VALUE# (&gt;#SWITCH_POSITION_TYPE#:#SWITCH_POSITION_VAR#)
    </Update>
    <UseTemplate Name = "ASOBO_GT_Anim_Code">
      <ANIM_CODE>(#SWITCH_POSITION_TYPE#:#SWITCH_POSITION_VAR#) 100 *</ANIM_CODE>
    </UseTemplate>
    <UseTemplate Name = "ASOBO_GT_AnimTriggers_2SoundEvents">
    </UseTemplate>
    <UseTemplate Name = "ASOBO_GT_Interaction_LeftSingle_Code">
      <LEFT_SINGLE_CODE>
        (#SWITCH_POSITION_TYPE#:#SWITCH_POSITION_VAR#) ! (&gt;#SWITCH_POSITION_TYPE#:#SWITCH_POSITION_VAR#)
        #LEFT_SINGLE_CODE#
      </LEFT_SINGLE_CODE>
    </UseTemplate>
  </Component>
</Template>


<!--### BREAKER FAILURES ###-->

<Macro Name="Wind"> (A:RELATIVE WIND VELOCITY BODY Z, knots) 14 /</Macro>
<Template Name="Breaker_Trip"> <!-- TODO CHANGE TIMINGS -->
	<Update Frequency="1">
		(A:CIRCUIT PITOT HEAT ON, bool) 1 ==
		if{
			(O:JPL152_PITOT_TIME) 1500 &lt; if{ (O:JPL152_PITOT_TIME) 5 + (&gt;O:JPL152_PITOT_TIME) }
			(O:JPL152_PITOT_TIME) 1500 &lt; (O:JPL152_PITOT_TIME) 0 &gt; and if{ (O:JPL152_PITOT_TIME) @wind - (&gt;O:JPL152_PITOT_TIME) }
		}
		(A:CIRCUIT PITOT HEAT ON, bool) 0 ==
		if{
			(O:JPL152_PITOT_TIME) 0 &gt; if{ (O:JPL152_PITOT_TIME) @wind - 1 - (&gt;O:JPL152_PITOT_TIME) }
		}
	</Update>
	<Update Frequency="0.2">
		(O:JPL152_PITOT_TIME) 1500 &gt; 
		(A:CIRCUIT PITOT HEAT ON, bool) 1 == and
		(A:AMBIENT TEMPERATURE, celsius) 8 &gt; and
		if{ 
			0 (&gt;A:BUS CONNECTION ON:4, bool)
		}
	</Update>
	
	
	<!-- random failure -->
	
	<Update Frequency="1">rand (&gt;O:JPL152_RANDOM_BREAKER)</Update>
	<Update Frequency="1">
		(O:JPL152_RANDOM_BREAKER) 0.14525 &gt; (O:JPL152_RANDOM_BREAKER) 0.14526 &lt; and
		if{ 0 (&gt;A:BUS CONNECTION ON:3, bool) }
		(O:JPL152_RANDOM_BREAKER) 0.72555 &gt; (O:JPL152_RANDOM_BREAKER) 0.72556 &lt; and
		if{ 0 (&gt;A:BUS CONNECTION ON:5, bool) }
		(O:JPL152_RANDOM_BREAKER) 0.17843 &gt; (O:JPL152_RANDOM_BREAKER) 0.17844 &lt; and
		if{ 0 (&gt;A:BUS CONNECTION ON:6, bool) }
		(O:JPL152_RANDOM_BREAKER) 0.53087 &gt; (O:JPL152_RANDOM_BREAKER) 0.53088 &lt; and
		if{ 0 (&gt;A:BUS CONNECTION ON:7, bool) }
		(O:JPL152_RANDOM_BREAKER) 0.25382 &gt; (O:JPL152_RANDOM_BREAKER) 0.25383 &lt; and
		if{ 0 (&gt;A:BUS CONNECTION ON:8, bool) }
		(O:JPL152_RANDOM_BREAKER) 0.93654 &gt; (O:JPL152_RANDOM_BREAKER) 0.93655 &lt; and
		if{ 0 (&gt;A:BUS CONNECTION ON:9, bool) }
		(O:JPL152_RANDOM_BREAKER) 0.36485 &gt; (O:JPL152_RANDOM_BREAKER) 0.36486 &lt; and
		if{ 0 (&gt;A:BUS CONNECTION ON:10, bool) }
		(O:JPL152_RANDOM_BREAKER) 0.47232 &gt; (O:JPL152_RANDOM_BREAKER) 0.47233 &lt; and
		if{ 0 (&gt;A:BUS CONNECTION ON:11, bool) }
		(O:JPL152_RANDOM_BREAKER) 0.61531 &gt; (O:JPL152_RANDOM_BREAKER) 0.61532 &lt; and
		if{ 0 (&gt;A:BUS CONNECTION ON:12, bool) }
		(O:JPL152_RANDOM_BREAKER) 0.86920 &gt; (O:JPL152_RANDOM_BREAKER) 0.86921 &lt; and
		if{ 0 (&gt;A:BUS CONNECTION ON:13, bool) }
	</Update>
	
</Template>
